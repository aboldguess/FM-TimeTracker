<!--
Mini-README: Shared HTML shell with modern styling hooks and role-aware navbar.
Used by all pages to keep UX consistent and discoverable.
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title or 'FM TimeTracker' }}</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <nav class="navbar">
    <div class="nav-left"><a href="/" class="brand">FM TimeTracker</a></div>
    <div class="nav-right">
      {% if user and user.role == 'admin' %}
      <details class="menu">
        <summary>Admin</summary>
        <div class="menu-items">
          <a href="/admin/users">Manage Users</a>
          <a href="/admin/site">Manage Site</a>
        </div>
      </details>
      {% endif %}
      {% if user %}
      <details class="menu">
        <summary>ðŸ‘¤ {{ user.full_name }}</summary>
        <div class="menu-items">
          <a href="/learning-zone">Learning Zone (FAQ & help)</a>
          <a href="/profile">My Details</a>
          <a href="/subscription">Manage Subscription</a>
          <a href="/logout">Log out</a>
        </div>
      </details>
      {% else %}
      <a href="/login" class="btn">Sign In</a>
      {% endif %}
    </div>
  </nav>
  <div class="app-shell">
    {% if user %}
    <aside class="sidebar">
      <h2>Workspace</h2>
      <p>
        {% if user.role == 'admin' %}
        Admin control hub
        {% elif user.role == 'programme_manager' %}
        Programme oversight hub
        {% elif user.role == 'project_manager' %}
        Project delivery hub
        {% else %}
        Personal time & leave hub
        {% endif %}
      </p>
      <nav class="sidebar-nav">
        <a href="/dashboard" class="{% if request.url.path == '/dashboard' %}active{% endif %}">My Dashboard</a>
        <a href="/timesheets" class="{% if request.url.path == '/timesheets' %}active{% endif %}">Timesheets</a>
        <a href="/leave-requests" class="{% if request.url.path == '/leave-requests' %}active{% endif %}">Leave Requests</a>
        <a href="/projects" class="{% if request.url.path == '/projects' %}active{% endif %}">Projects</a>
        <a href="/programmes" class="{% if request.url.path == '/programmes' %}active{% endif %}">Programmes</a>
        <a href="/customers" class="{% if request.url.path == '/customers' %}active{% endif %}">Customers</a>
        <a href="/company" class="{% if request.url.path == '/company' %}active{% endif %}">Company</a>
        <a href="/site-management" class="{% if request.url.path == '/site-management' %}active{% endif %}">
          Site Management
          {% if user.role != 'admin' %}
          <span class="badge">Admin</span>
          {% endif %}
        </a>
      </nav>
      <p class="helper">Need help? Visit the Learning Zone for step-by-step walkthroughs.</p>
    </aside>
    {% endif %}
    <main class="container main-content">
      {% block contextual_nav %}{% endblock %}
      {% block content %}{% endblock %}
    </main>
  </div>
</body>
</html>
