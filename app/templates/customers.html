<!--
Mini-README: Customer management hub for creating and reviewing client records.
-->
{% extends 'base.html' %}
{% block contextual_nav %}
<nav class="context-toolbar" aria-label="Customer sections">
  <a href="#overview" class="context-pill">Overview</a>
  <a href="#add-customer" class="context-pill">Add customer</a>
  <a href="#recent-customers" class="context-pill">Recent customers</a>
</nav>
{% endblock %}
{% block content %}
<section id="overview">
  <h1>Customers</h1>
  <p class="instruction">All projects must map to a customer record for clean reporting and billing.</p>

  <div class="card-grid">
    <article class="card">
      <h3>Total customers</h3>
      <p>{{ customer_count }}</p>
    </article>
    <article class="card">
      <h3>Governance</h3>
      <p>Keep customer metadata current so projects stay aligned with contract owners.</p>
    </article>
  </div>

  <div class="panel" id="add-customer">
    <h2>Add customer</h2>
    <p class="helper">Capture clean customer records to power project, programme, and billing dropdowns.</p>
    <form class="form" method="post" action="/customers/form">
      {{ csrf_input(request) }}
      <div class="form-grid">
        <div>
          <label for="name">Customer name</label>
          <input id="name" name="name" type="text" placeholder="Northwind Trading" required />
        </div>
        <div>
          <label for="industry">Industry (optional)</label>
          <input id="industry" name="industry" type="text" placeholder="Financial services" />
        </div>
      </div>
      <button class="btn" type="submit">Create customer</button>
    </form>
  </div>

  <div class="panel" id="recent-customers">
    <h2>Recent customers</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Industry</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in recent_customers %}
        <tr>
          <td>{{ customer.name }}</td>
          <td>{{ customer.industry or '-' }}</td>
          <td>
            <form method="post" action="/customers/{{ customer.id }}/delete" onsubmit="return confirm('Delete this customer?');">
      {{ csrf_input(request) }}
              <button class="btn secondary" type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="3" class="instruction">No customers added yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
